"0","library(rvest)"
"0",""
"0","tabla_comunas <- session(""https://es.wikipedia.org/wiki/Anexo:Comunas_de_Chile"") |> # sitio web que scrapearemos"
"0","  read_html() |> # leemos el contenido del sitio web "
"0","  html_table() # extraemos las tablas del sitio web"
"0",""
"0","datos_comunas <- tabla_comunas[[1]] |> # elegimos la primera tabla obtenida"
"0","  clean_names() |> # limpiamos los nombres de la tabla usando {janitor}"
"0","  filter(region == ""Metropolitana de Santiago"") |> "
"0","  # convertir los códigos comunales a texto"
"0","  rename(codigo_comuna = 1) |> "
"0","  mutate(codigo_comuna = as.character(codigo_comuna)) |>"
"0","  # limpiar variables numéricas para estén disponibles en formato numérico en vez de como texto"
"0","  mutate(poblacion2020 = str_remove(poblacion2020, "" ""), # borrar espacios"
"0","         poblacion2020 = as.numeric(poblacion2020)) |>  # transformar texto a numérico"
"0","  # corregir superficie"
"0","  mutate(superficie_km2 = str_remove(superficie_km2, ""\\.""), # borrar puntos separadores de miles"
"0","         superficie_km2 = str_replace(superficie_km2, "","", "".""), # reemplazar comas por puntos"
"0","         superficie_km2 = as.numeric(superficie_km2)) |> # transformar texto a numérico"
"0","  # corregir densidad"
"0","  mutate(densidad_hab_km2 = str_remove_all(densidad_hab_km2, ""\\.""), # borrar puntos separadores de miles"
"0","         densidad_hab_km2 = str_replace(densidad_hab_km2, "","", "".""), # reemplazar comas por puntos"
"0","         densidad_hab_km2 = as.numeric(densidad_hab_km2)) |> # transformar texto a numérico"
"0",""
"0","print(datos_comunas)"
